// This is a buffer payload, try decrypting it
/**
check encoded_sample.payload in consts
 */

import { decodeData } from "./wam/index.js";
import { read, readFileSync, writeFileSync } from "fs";
import { WAM_EVENTS, WAM_GLOBALS } from "./wam/utils.js";

const buf = Buffer.from(
	"V0FNBQHbAgAwCwiADQZNYWMgT1OAEREyLjMwMDAuMTAxMjAwNzMxNiAVUC+x6/BliCcBEENocm9tZSAxMjIuMC4wLjAYeQKICwMGQ2hyb21lKIMDOHkGBBhpDYiPDgp4NjM3Njg2MTgwiJkRBzEwLjE1Ljcoaxg4qzgEOMMCAhjtMwhrAzmoBv8SARICEgMSBBIFEgYSBxIIEgkSChILEgwSDRIOEg8SEBIREhISExIUUC+x6/BlKGkNOZQH/4IBBHdhd2MiAlAvsevwZThpDQI5sBL/IgFQL7rr8GU4aQ0DOU4F/4IBDmluaXRpYWwtYXNzZXRzEgISBFAvuuvwZThpDQQ54AX/UgGpRX8AUC+76/BlOGkNBTnQDf+CAhI2MjI0OTdGMjE3MTAyODc3OTMiC0IDxiVQL7zr8GU4aQ0GOdAN/4ICEjYyMjQ5N0YyMTcxMDI4Nzc5MyILQgPSJzIBA1AvvOvwZThpDQc50A3/ggISNjIyNDk3RjIxNzEwMjg3NzkzIgtCA0goMgEEEgdQL7zr8GU4aQ0IPQID/1AvvOvwZThpDQk5Vgf/MgEFEgISBRIDEgYSBFAvvOvwZThpDQo5KAz/EgYSCRIHEgUSCjIBFBIbEh0SAkILWSIiDUIMH0hCAytKQgShSlAvvOvwZThpDQs57hD/UgVgcGAuUgSZfAUAMgMEUC+86/BlOGkNDDloBf+CAQYzZnNvb3NSAo7r8GUyBRxSA/EBAAQSBlAvvOvwZThpDQ057BD/UgdgcGAuMgIcUgPxAQAEEgEyBD1SBcYTBQBQL7zr8GU4aQ0OOYIC/0IWOiJCF0kiQiwpQkItOUKCKgRNQUlOQivvS0IulUxCIr0hQgKIAkIDiAISBBIFIgYiByIIIgkiChILMgwEQg2AAkIOxAJCD5QCQhDFAkIRxQJCEsUCQhO9IUIUvSFCFb0hIh4iIBIhQhg+QkIZH0hCGh9IQhuhSiIcEh9CKK1KUC+86/BlOGkNDzmwAv+CAVEvcnNyYy5waHAvdjMveWwvbC8wLGNyb3NzLzZiSkJaaVFXRnliMjdaZDR2NHgtSHZLNlNqajVaUFdZYi5jc3M/X25jX3g9SWozV3A4bGc1S3pCAmcIUC+86/BlOGkNEDmwAv+CATIvcnNyYy5waHAvdjMveUYvci9wNTVIZlhXX19tTS5qcz9fbmNfeD1JajNXcDhsZzVLekICowVQL7zr8GU4aQ0RObAC/4IBMi9yc3JjLnBocC92My95Ri9yL29mb3JzLUNqNUlxLmpzP19uY194PUlqM1dwOGxnNUt6QgJoCFAvvOvwZThpDRI5sAL/ggEyL3JzcmMucGhwL3YzL3lhL3IvcUFMYUtob2d4cDcuanM/X25jX3g9SWozV3A4bGc1S3pCAhIJUC+86/BlOGkNEzmwAv+CAVMvcnNyYy5waHAvdjMveWsvci8xUEctVUgwYzlFUURRakp4T0hvclBKdnNXcWVoZEV0V3dEUVZFSC1nLUZEQy5qcz9fbmNfeD1JajNXcDhsZzVLekIC4AZQL7zr8GU4aQ0UObAC/4IBRy9yc3JjLnBocC92M2kzMHA0L3lWL2wvbWFrZWhhc3RlX2poYXNoL2lDeW5hME1qQkdWLmpzP19uY194PUlqM1dwOGxnNUt6QgLbBVAvvOvwZThpDRU5sAL/ggFKL3JzcmMtdHJhbnNsYXRpb25zLnBocC92NmkzMHA0L3kxL2wvZW5fVVMvaUN5bmEwTWpCR1YuanM/X25jX3g9SWozV3A4bGc1S3pCAtsFUC+86/BlOGkNFjmwAv+CAUcvcnNyYy5waHAvdjNpeHBzNC95eS9sL21ha2VoYXN0ZV9qaGFzaC8za25sa1JBVVVqQi5qcz9fbmNfeD1JajNXcDhsZzVLekIC0wZQL7zr8GU4aQ0XObAC/4IBSi9yc3JjLXRyYW5zbGF0aW9ucy5waHAvdjZpeHBzNC95Sy9sL2VuX1VTLzNrbmxrUkFVVWpCLmpzP19uY194PUlqM1dwOGxnNUt6QgLpBlAvvOvwZThpDRg5sAL/ggEyL3JzcmMucGhwL3YzL3lYL3IvN2U0Tk1tWDJCMG0uanM/X25jX3g9SWozV3A4bGc1S3pCAnUKUC+86/BlOGkNGTmwAv+CAUcvcnNyYy5waHAvdjNpRlMyNC95ay9sL21ha2VoYXN0ZV9qaGFzaC9jdEF4U2lEZGJyXy5qcz9fbmNfeD1JajNXcDhsZzVLekICOAtQL7zr8GU4aQ0aObAC/4IBSi9yc3JjLXRyYW5zbGF0aW9ucy5waHAvdjZpRlMyNC95QS9sL2VuX1VTL2N0QXhTaURkYnJfLmpzP19uY194PUlqM1dwOGxnNUt6QgJ1BlAvvOvwZThpDRs5sAL/ggFHL3JzcmMucGhwL3YzaVJkZzQveUcvbC9tYWtlaGFzdGVfamhhc2gvZkx1MXFEN0FIZ1YuanM/X25jX3g9SWozV3A4bGc1S3pCAi0eUC+86/BlOGkNHDmwAv+CAUovcnNyYy10cmFuc2xhdGlvbnMucGhwL3Y2aVJkZzQveWcvbC9lbl9VUy9mTHUxcUQ3QUhnVi5qcz9fbmNfeD1JajNXcDhsZzVLekICcwZQL7zr8GU4aQ0dObAC/4IBDC9raWxsc3dpdGNoL0ICfQFQL7zr8GU4aQ0eObAC/4IBMi9yc3JjLnBocC92My95eS9yLzBWZlpQMy1pdTZuLmpzP19uY194PUlqM1dwOGxnNUt6QgLpAlAvvOvwZThpDR85sAL/ggFHL3JzcmMucGhwL3YzaWxuSDQveXUvbC9tYWtlaGFzdGVfamhhc2gvV2dXTzE1SG5Pa2UuanM/X25jX3g9SWozV3A4bGc1S3pCAvUXUC+86/BlOGkNIDmwAv+CATIvcnNyYy5waHAvdjMveU0vci9GUGxOZ3VYeUI5ZS5qcz9fbmNfeD1JajNXcDhsZzVLekICTgNQL7zr8GU4aQ0hObAC/4IBOy9yc3JjLnBocC92My95Vi9sLzAsY3Jvc3MvRWlNMVdoS3lWVjcuY3NzP19uY194PUlqM1dwOGxnNUt6QgLlAVAvvOvwZThpDSI5sAL/ggFHL3JzcmMucGhwL3YzaVZsbDQveUsvbC9tYWtlaGFzdGVfamhhc2gvQ3VaRUQzMkZTQnIuanM/X25jX3g9SWozV3A4bGc1S3pCAowWUC+86/BlOGkNIzmwAv+CATIvcnNyYy5waHAvdjMveVUvci9EZFFiVXBTSDUyVS5qcz9fbmNfeD1JajNXcDhsZzVLekICuxZQL7zr8GU4aQ0kObAC/4IBRy9yc3JjLnBocC92M2lTRDk0L3ltL2wvbWFrZWhhc3RlX2poYXNoL0E1MW5YNmd4ZDNiLmpzP19uY194PUlqM1dwOGxnNUt6QgIgGFAvvOvwZThpDSU5sAL/ggFHL3JzcmMucGhwL3YzaUhCNzQveTUvbC9tYWtlaGFzdGVfamhhc2gvZVdkUFBjaTlJOEguanM/X25jX3g9SWozV3A4bGc1S3pCAtMCUC+86/BlOGkNJjmwAv+CAUcvcnNyYy5waHAvdjNpbzAzNC95dS9sL21ha2VoYXN0ZV9qaGFzaC8wd3JXbjdvaVE5Ny5qcz9fbmNfeD1JajNXcDhsZzVLekICTBhQL7zr8GU4aQ0nObAC/4IBMi9yc3JjLnBocC92My95VC9yL0JDRVBNVmdyREdjLmpzP19uY194PUlqM1dwOGxnNUt6QgItIFAvvOvwZThpDSg5sAL/ggFHL3JzcmMucGhwL3YzaTY4YTQveVYvbC9tYWtlaGFzdGVfamhhc2gvRXVMMERFYmg3VU0uanM/X25jX3g9SWozV3A4bGc1S3pCAoMYUC+86/BlOGkNKTmwAv+CAUcvcnNyYy5waHAvdjNpSUJjNC95Ti9sL21ha2VoYXN0ZV9qaGFzaC9oYkUwNEdiRTJpWS5qcz9fbmNfeD1JajNXcDhsZzVLekICLiBQL7zr8GU4aQ0qObAC/4IBOy9yc3JjLnBocC92My95dS9sLzAsY3Jvc3MvbkRiVGtxbHZHUFAuY3NzP19uY194PUlqM1dwOGxnNUt6QgK9AVAvvOvwZThpDSs5sAL/ggEyL3JzcmMucGhwL3YzL3lKL3IvenRVZ2FndXBEbE8uanM/X25jX3g9SWozV3A4bGc1S3pCArEfUC+86/BlOGkNLDmwAv+CASEvcnNyYy5waHAvdjMveVAvci9yWVpxUENCYUc3MC5wbmdCAicQUC+86/BlOGkNLTmwAv+CARMvZGF0YS9tYW5pZmVzdC5qc29uQgKnIVAvvOvwZThpDS45sAL/ggGPL3N0YXRpY19yZXNvdXJjZXMvd2Vid29ya2VyX3YxL2luaXRfc2NyaXB0Lz9fX2hzPTE5Nzk0LkhZUCUzQXdoYXRzYXBwX2NvbWV0X3BrZy4yLjEuLjAuMSZfX3NwaW5fcj0xMDEyMDA3MzE2Jl9fc3Bpbl9iPXRydW5rJl9fc3Bpbl90PTE3MTAyODc3ODVCAv0AUC+86/BlOGkNLzmwAv+CAUcvcnNyYy5waHAvdjNpVHZ5NC95SS9sL21ha2VoYXN0ZV9qaGFzaC94NjhaRFpMSlFLMi5qcz9fbmNfeD1JajNXcDhsZzVLekICiAJQL7zr8GU4aQ0wObAC/4IBIS9yc3JjLnBocC92My95LS9yL3FtTFZWLTZFTTRELnBuZ0ICWgJQL7zr8GU4aQ0xObAC/4IBOy9yc3JjLnBocC92My95Wi9sLzAsY3Jvc3MvVjJWc1owWjhDckYuY3NzP19uY194PUlqM1dwOGxnNUt6QgLHAFAvvOvwZThpDTI5sAL/ggFHL3JzcmMucGhwL3YzaTZGcDQveTkvbC9tYWtlaGFzdGVfamhhc2gvak81LWtqNG9ZT00uanM/X25jX3g9SWozV3A4bGc1S3pCAogCUC+86/BlOGkNMzmwAv+CAUcvcnNyYy5waHAvdjNpMUlXNC95Si9sL21ha2VoYXN0ZV9qaGFzaC9Lam4tSWN5bndXQS5qcz9fbmNfeD1JajNXcDhsZzVLekICvgBQL7zr8GU4aQ00ObAC/4IBMi9yc3JjLnBocC92My95VC9yLzNHNnBTSEVVak5zLmpzP19uY194PUlqM1dwOGxnNUt6QgKqA1AvvOvwZThpDTU5sAL/ggFHL3JzcmMucGhwL3YzaWFzZjQveXYvbC9tYWtlaGFzdGVfamhhc2gvd0Y2b1JrY2t0d00uanM/X25jX3g9SWozV3A4bGc1S3pCAg8EUC+86/BlOGkNNjmwAv+CAUcvcnNyYy5waHAvdjNpaWNhNC95TS9sL21ha2VoYXN0ZV9qaGFzaC9QYmF3U2E5T01mRy5qcz9fbmNfeD1JajNXcDhsZzVLekICNgFQL7zr8GU4aQ03Oe4Q/1IFYHBgLlIE4cgFADIDCFAvwevwZThpDTg5TgX/ggEGZW1vamlzEgISBFAvwevwZThpDTk54AX/UgEjmYEA",
	"base64"
);
writeFileSync("./test.payload", buf);
const { header, data } = decodeData(buf);
console.log(header, data);

const buf_ = readFileSync("./consts/bigger_sample.payload");
console.log(buf_.toString("base64"));
